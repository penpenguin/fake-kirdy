# 実装計画

- [x] 1. プロジェクト基盤とPhaser.jsセットアップ
  - プロジェクト構造の作成（src/, assets/, dist/フォルダ）
  - package.jsonとWebpack/Vite設定ファイルの作成
  - Phaser.js 3.xとMatter.jsの依存関係インストール
  - 基本的なHTML5 Canvasとゲームループの初期化
  - _要件: 6.1, 6.4_

- [x] 2. ゲームシーンシステムの実装
  - BootScene（初期化とアセット読み込み）の作成
  - MenuScene（メインメニュー）の実装
  - GameScene（メインゲームプレイ）の基本構造作成
  - PauseScene（ポーズメニュー）の実装
  - シーン間の遷移システム実装
  - _要件: 5.3_

- [x] 3. 基本的なKirdyキャラクターの実装
  - Kirdyスプライトクラスの作成と基本プロパティ設定
  - 基本移動システム（左右移動、重力適用）の実装
  - ジャンプ機能の実装
  - ホバリング機能（スペースキー長押し）の実装
  - 基本的なアニメーションシステムの実装
  - _要件: 1.1, 1.2, 1.3_

- [x] 4. 入力システムとコントロール
  - キーボード入力管理システムの実装
  - 移動キー（矢印キー/WASD）のバインディング
  - アクションキー（スペース、C、Z、X、S）のバインディング
  - タッチコントロール用の仮想ボタンUI作成
  - 入力の応答性とフィードバック実装
  - _要件: 1.1, 1.2, 1.3, 1.4, 6.2_

- [x] 5. 吸い込みシステムの実装
  - 吸い込みアクション（Cキー）の基本機能実装
  - 吸い込み範囲と対象検出システム
  - 敵が口の中に入る状態管理
  - 吸い込み中のKirdyアニメーション実装
  - 吸い込み効果音とビジュアルエフェクト
  - _要件: 1.4, 2.1_

- [x] 6. 飲み込みと吐き出しシステム
  - 飲み込み機能（下矢印/Sキー）の実装
  - 吐き出し機能（Zキー）での星型弾丸発射
  - 口の中の敵の状態管理と表示
  - 星型弾丸の物理挙動と衝突判定
  - _要件: 2.2, 2.3_

- [x] 7. 能力コピーシステムの実装
  - 基本的な能力データ構造の定義
  - Fire、Ice、Sword能力の実装
  - 能力獲得時のKirdyの見た目変更
  - 能力に応じた特殊攻撃の実装
  - 能力破棄機能（Xキー）の実装
  - _要件: 2.2, 2.4, 2.5, 2.6_

- [x] 8. 敵キャラクターシステムの実装
  - 基本的な敵クラス（Wabble Bee、Dronto Durt）の作成
  - 敵のAI（移動パターン、プレイヤー検出）実装
  - 敵の能力タイプ設定と管理
  - 敵のHP管理と撃破処理
  - _要件: 4.1, 4.2, 4.3, 4.4_

- [x] 9. Kirdyに優しい敵管理システム
  - 画面内敵数制限（最大3体）の実装
  - Kirdy周囲の敵密度制御（2体制限）システム
  - 敵の出現間隔とクールダウン管理
  - 敵の分散アルゴリズム実装
  - _要件: 4.5, 4.6_

- [x] 10. 物理エンジンと衝突判定
  - Matter.jsを使用した基本的な物理システム設定
  - Kirdyと地形の衝突判定実装
  - Kirdyと敵の衝突判定実装
  - 攻撃と弾丸の衝突判定実装
  - 物理パラメータの調整とバランシング
  - _要件: 1.5_

- [x] 11. マップとエリアシステム
  - 基本的なタイルマップシステムの実装
  - Central Hubエリアの作成
  - エリア間の遷移システム実装
  - エリア発見と探索状況の管理
  - _要件: 3.1, 3.2_

- [x] 12. マップ表示システム
  - マップUI（Mキー）の実装
  - 探索済みエリアの表示
  - 未発見エリアの視覚的区別
  - 現在位置の表示
  - _要件: 3.3, 3.4_

- [x] 13. ユーザーインターフェース
  - HPバーの実装と表示
  - 現在の能力表示UI
  - スコア表示システム
  - ポーズメニューの詳細実装
  - ゲームオーバー画面とリスタート機能
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [x] 14. セーブシステムとデータ永続化
  - ローカルストレージを使用したセーブシステム
  - ゲーム進行状況の保存と読み込み
  - エラーハンドリングとフォールバック機能
  - セーブデータの検証とマイグレーション
  - _要件: 6.3_

- [x] 15. アセット管理とプリローダー
  - 画像、音声、データファイルの読み込みシステム
  - プリローダー画面の実装
  - アセット読み込み失敗時のフォールバック
  - 最適化されたアセット配信
  - _要件: 6.1, 6.4_

- [x] 16. パフォーマンス最適化
  - フレームレート監視システムの実装
  - オブジェクトプーリングによるメモリ最適化
  - 画面外オブジェクトの非アクティブ化
  - WebGL/Canvas 2Dの自動切り替え実装
  - _要件: 6.1, 6.4_

- [x] 17. 音響システム
  - 基本的な効果音システムの実装
  - BGM再生とループ機能
  - 音量調整とミュート機能
  - 能力使用時の専用効果音
  - _要件: 5.2_

- [x] 18. ユニットテストの実装
  - AbilitySystemのテストケース作成
  - EnemyManagerのテストケース作成
  - 衝突判定システムのテストケース作成
  - セーブシステムのテストケース作成
  - _要件: 全般_

- [x] 19. 統合テストの実装
  - ゲームプレイフロー（吸い込み→飲み込み→能力使用）のテスト
  - エリア遷移システムのテスト
  - セーブ・ロード機能の統合テスト
  - パフォーマンステストの実装
  - _要件: 全般_

- [x] 20. 最終統合とポリッシュ
  - 全システムの統合と動作確認
  - バグ修正と安定性向上
  - ユーザビリティの改善
  - 最終的なバランス調整
  - デプロイ準備とビルド最適化
  - _要件: 全般_
